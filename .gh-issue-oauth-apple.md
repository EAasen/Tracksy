## Summary
Implement Apple Sign In (Sign in with Apple) authentication flow to allow users to sign up and log in using their Apple ID.

## Current Status
- TODO comment in `backend/app.js` line 370
- Basic OAuth infrastructure may exist
- Apple Sign In not implemented

## Tasks
- [ ] Register App ID in Apple Developer Portal
- [ ] Configure Sign in with Apple capability
- [ ] Create Services ID for web authentication
- [ ] Add Apple OAuth strategy (passport-apple or similar)
- [ ] Create `/api/v1/auth/apple` endpoint
- [ ] Create `/api/v1/auth/apple/callback` endpoint
- [ ] Handle Apple's private email relay
- [ ] Store Apple user ID and profile data
- [ ] Handle account linking (if user exists with email)
- [ ] Add Apple Sign In button to frontend (use official Apple button)
- [ ] Test OAuth flow end-to-end
- [ ] Add configuration to environment variables
- [ ] Document setup process

## Acceptance Criteria
- Users can sign up with Apple
- Users can log in with Apple
- Apple profile data stored (name, email or private relay)
- Private email relay handled correctly
- Existing accounts linked by email if applicable
- OAuth errors handled gracefully
- Frontend shows Apple Sign In button (official design)
- Environment variables documented
- Works on iOS Safari and desktop browsers

## Implementation Notes

### Dependencies
```bash
npm install passport-apple
```

### Backend Route (backend/routes/v1/auth.js)
```javascript
const AppleStrategy = require('passport-apple').Strategy;

passport.use(new AppleStrategy({
    clientID: process.env.APPLE_CLIENT_ID,
    teamID: process.env.APPLE_TEAM_ID,
    callbackURL: process.env.APPLE_CALLBACK_URL,
    keyID: process.env.APPLE_KEY_ID,
    privateKeyLocation: process.env.APPLE_PRIVATE_KEY_PATH
  },
  async (accessToken, refreshToken, idToken, profile, done) => {
    // Find or create user
    // Handle private email relay
  }
));

router.get('/auth/apple', passport.authenticate('apple'));

router.post('/auth/apple/callback',
  passport.authenticate('apple', { failureRedirect: '/login' }),
  (req, res) => {
    res.redirect('/dashboard');
  }
);
```

### Environment Variables
```
APPLE_CLIENT_ID=your_services_id
APPLE_TEAM_ID=your_team_id
APPLE_KEY_ID=your_key_id
APPLE_PRIVATE_KEY_PATH=/path/to/AuthKey_KEYID.p8
APPLE_CALLBACK_URL=https://yourdomain.com/api/v1/auth/apple/callback
```

### Frontend Button
Must use official Apple button design:
- Black or white background
- "Sign in with Apple" or "Sign up with Apple" text
- Apple logo required
- Follow Human Interface Guidelines

### Code Location
File: `backend/app.js`
Line: 370
Comment: `// TODO: Add Apple Sign In`

## Privacy Considerations
- Apple's private email relay must be supported
- User can hide real email address
- Privacy policy required
- Terms of service required
- Cannot use Apple Sign In data for marketing

## Related Issues
- Similar to #122 (Facebook OAuth)
- Part of authentication enhancement

## Epic
#47: Community SaaS Platform Features
