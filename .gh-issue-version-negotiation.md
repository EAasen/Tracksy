## Summary
Implement header-based API version negotiation (Accept-Version) as an alternative to URL-based versioning for more flexible API evolution.

## Current Status
- URL-based versioning: `/api/v1/*`
- No header-based version negotiation
- Clients must change URLs to switch versions
- Cannot gradually deprecate endpoints

## Rationale
Header-based versioning provides:
- Cleaner URLs that don't change
- Client control over version per request
- Ability to sunset versions gradually
- Better semantic versioning support
- Standard REST API practice

## Tasks
- [ ] Design version header format (Accept-Version: 1.0.0)
- [ ] Create middleware to parse Accept-Version header
- [ ] Add version negotiation logic (default to latest)
- [ ] Update routing to support both URL and header versioning
- [ ] Add version to response headers (X-API-Version: 1.0.0)
- [ ] Document version negotiation in OpenAPI spec
- [ ] Update API documentation with examples
- [ ] Add tests for version negotiation
- [ ] Add deprecation warning headers for old versions

## Acceptance Criteria
- Accept-Version header controls API version
- Defaults to latest version if header omitted
- Response includes X-API-Version header
- Both URL and header versioning work
- Invalid version returns 406 Not Acceptable
- OpenAPI spec documents version negotiation
- Tests cover all negotiation scenarios
- Documentation includes curl examples

## Implementation Notes

### Middleware (backend/middleware/versionNegotiation.js)
```javascript
function versionNegotiation(req, res, next) {
  const acceptVersion = req.headers['accept-version'];
  const urlVersion = req.params.version;
  
  // Prefer URL version, fallback to header, default to latest
  const version = urlVersion || acceptVersion || '1';
  
  // Validate version exists
  if (!SUPPORTED_VERSIONS.includes(version)) {
    return res.status(406).json({
      error: {
        message: `API version ${version} not supported`,
        code: 'VERSION_NOT_SUPPORTED',
        statusCode: 406,
        supportedVersions: SUPPORTED_VERSIONS
      }
    });
  }
  
  req.apiVersion = version;
  res.setHeader('X-API-Version', version);
  
  // Add deprecation warning if applicable
  if (DEPRECATED_VERSIONS.includes(version)) {
    res.setHeader('Warning', '299 - "API version deprecated"');
  }
  
  next();
}
```

### OpenAPI Documentation
```yaml
servers:
  - url: https://api.tracksy.app/api
    description: Production API
parameters:
  AcceptVersion:
    name: Accept-Version
    in: header
    description: API version (defaults to latest)
    schema:
      type: string
      example: "1.0.0"
responses:
  headers:
    X-API-Version:
      description: API version used for this response
      schema:
        type: string
        example: "1.0.0"
```

## Related Issues
- Builds on #61 (API v1 structure)
- Complements URL-based versioning
- Part of API maturity roadmap

## Epic
#45: Adventure Platform MVP Foundation
