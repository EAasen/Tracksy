"use strict";(self.webpackChunktracksy_frontend=self.webpackChunktracksy_frontend||[]).push([[792],{402:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(5458),a=n(6540),l=n(6734),i=n(7237),o=n(8442);n(2021);i.t1.register(i.PP,i.kc,i.FN,i.No,i.E8,i.hE,i.m_,i.s$);var c={responsive:!0,maintainAspectRatio:!1,animation:{duration:800},plugins:{legend:{position:"top"},title:{display:!0,text:"Heart Rate Over Time",font:{size:16}}},scales:{y:{title:{display:!0,text:"BPM"},beginAtZero:!1},x:{title:{display:!0,text:"Date"}}}},u={responsive:!0,maintainAspectRatio:!1,animation:{duration:800},plugins:{legend:{position:"top"},title:{display:!0,text:"Sleep Duration",font:{size:16}}},scales:{y:{title:{display:!0,text:"Hours"},beginAtZero:!0,max:12},x:{title:{display:!0,text:"Date"}}}},s=function(e){var t=e.metrics,n=(0,a.useRef)((0,o.jn)("health-metrics-chart-render")),i=(0,a.useMemo)(function(){if(!t||0===t.length)return{heartRateData:{labels:[],datasets:[]},sleepData:{labels:[],datasets:[]}};var e=(0,o.jn)("process-health-metrics"),n=(0,r.A)(t).sort(function(e,t){return new Date(e.date)-new Date(t.date)}),a=n.map(function(e){return new Date(e.date).toLocaleDateString()}),l={heartRateData:{labels:a,datasets:[{label:"Heart Rate (bpm)",data:n.map(function(e){return e.heartRate}),fill:!1,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",tension:.1,pointRadius:3,pointHoverRadius:5}]},sleepData:{labels:a,datasets:[{label:"Sleep Duration (hours)",data:n.map(function(e){return e.sleepDuration}),backgroundColor:"rgba(53, 162, 235, 0.5)",hoverBackgroundColor:"rgba(53, 162, 235, 0.7)"}]}};return(0,o.SH)("process-health-metrics",e),l},[t]),s=i.heartRateData,m=i.sleepData;return(0,a.useEffect)(function(){return(0,o.SH)("health-metrics-chart-render",n.current),function(){}},[]),t&&0!==t.length?a.createElement("div",{className:"health-metrics-chart w-full"},a.createElement("div",{className:"mb-8 border border-gray-300 rounded p-4 bg-white"},a.createElement("h3",{className:"text-lg font-medium mb-2"},"Heart Rate"),a.createElement("div",{style:{height:"300px"}},a.createElement(l.N1,{data:s,options:c}))),a.createElement("div",{className:"border border-gray-300 rounded p-4 bg-white"},a.createElement("h3",{className:"text-lg font-medium mb-2"},"Sleep Duration"),a.createElement("div",{style:{height:"300px"}},a.createElement(l.yP,{data:m,options:u})))):a.createElement("div",{className:"health-metrics-chart w-full border border-gray-300 rounded bg-gray-50"},a.createElement("p",{className:"text-center text-gray-500 py-8"},"No health metrics available to display"))};const m=a.memo(s)},2321:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(3029),a=n(2901),l=n(388),i=n(3954),o=n(5361),c=n(6540);function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}const s=function(e){function t(e){var n,a,o,c;return(0,r.A)(this,t),a=this,o=t,c=[e],o=(0,i.A)(o),(n=(0,l.A)(a,u()?Reflect.construct(o,c||[],(0,i.A)(a).constructor):o.apply(a,c))).state={hasError:!1,error:null,errorInfo:null},n}return(0,o.A)(t,e),(0,a.A)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:t})}},{key:"render",value:function(){var e=this.props,t=e.fallback,n=e.children,r=this.state,a=r.hasError,l=r.error,i=r.errorInfo;return a?t?t(l):c.createElement("div",{className:"error-boundary p-4 bg-red-50 rounded-md border border-red-200"},c.createElement("h2",{className:"text-lg font-semibold text-red-700 mb-2"},"Something went wrong"),c.createElement("p",{className:"text-sm text-red-600 mb-4"},"The application encountered an error. Please try refreshing the page."),c.createElement("details",{className:"text-xs text-gray-700"},c.createElement("summary",{className:"cursor-pointer font-medium"},"Error details"),c.createElement("pre",{className:"mt-2 p-2 bg-gray-100 rounded overflow-auto"},l&&l.toString(),i&&i.componentStack)),c.createElement("button",{onClick:function(){return window.location.reload()},className:"mt-3 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"},"Refresh Page")):n}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}])}(c.Component)},3759:(e,t,n)=>{var r=n(6540),a=n(961),l=n(467),i=n(296),o=n(4756),c=n.n(o),u=n(1083),s=n(4976),m=n(7767),d=n(4576),p=n(4278);n(2021);const f=function(){var e=(0,r.useState)(!1),t=(0,i.A)(e,2),n=t[0],a=t[1];return r.createElement("nav",{className:"bg-gray-800 p-4"},r.createElement("div",{className:"container mx-auto flex justify-between items-center"},r.createElement("div",{className:"text-white text-2xl font-bold"},"Tracksy"),r.createElement("div",{className:"md:hidden"},r.createElement("button",{onClick:function(){a(!n)},className:"text-white focus:outline-none"},n?r.createElement(d.A,{className:"h-6 w-6"}):r.createElement(p.A,{className:"h-6 w-6"}))),r.createElement("div",{className:"md:flex ".concat(n?"block":"hidden"," w-full md:w-auto")},r.createElement("ul",{className:"md:flex md:space-x-4"},r.createElement("li",null,r.createElement(s.N_,{to:"/",className:"block text-white py-2 px-4 hover:bg-gray-700 rounded"},"Home")),r.createElement("li",null,r.createElement(s.N_,{to:"/profile",className:"block text-white py-2 px-4 hover:bg-gray-700 rounded"},"Profile")),r.createElement("li",null,r.createElement(s.N_,{to:"/settings",className:"block text-white py-2 px-4 hover:bg-gray-700 rounded"},"Settings")),r.createElement("li",null,r.createElement(s.N_,{to:"/notifications",className:"block text-white py-2 px-4 hover:bg-gray-700 rounded"},"Notifications"))))))};const v=function(){var e=(0,r.useState)(""),t=(0,i.A)(e,2),n=t[0],a=t[1];return r.createElement("form",{onSubmit:function(e){e.preventDefault()},className:"relative"},r.createElement("input",{type:"text",className:"w-64 px-4 py-2 pr-10 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search activities, metrics...",value:n,onChange:function(e){return a(e.target.value)}}),r.createElement("button",{type:"submit",className:"absolute right-0 top-0 mt-2 mr-3 text-gray-400 hover:text-gray-600"},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}))))};const h=function(){var e=(0,m.zy)();return(0,r.useEffect)(function(){var t=function(){var t=(0,l.A)(c().mark(function t(){var r;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:"/dashboard"===(r=e.pathname)?(n.e(320).then(n.bind(n,320)),n.e(985).then(n.bind(n,9985))):"/profile"===r?n.e(249).then(n.bind(n,9249)):"/integrations"===r&&n.e(290).then(n.bind(n,4290));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();t()},[e]),null};var b=n(2321);const g=function(e){var t=e.onRegister,n=e.loading,a=e.error,l=(0,r.useState)(""),o=(0,i.A)(l,2),c=o[0],u=o[1],s=(0,r.useState)(""),m=(0,i.A)(s,2),d=m[0],p=m[1],f=(0,r.useState)(""),v=(0,i.A)(f,2),h=v[0],b=v[1],g=(0,r.useState)("user"),y=(0,i.A)(g,2),E=y[0],w=y[1];return r.createElement("form",{onSubmit:function(e){e.preventDefault(),t({username:c,email:d,password:h,role:E})},className:"space-y-4"},r.createElement("h2",{className:"text-xl font-semibold"},"Register"),a&&r.createElement("p",{className:"text-red-500"},a),r.createElement("div",null,r.createElement("label",{className:"block"},"Username:"),r.createElement("input",{type:"text",value:c,onChange:function(e){return u(e.target.value)},required:!0,className:"w-full p-2 border border-gray-300 rounded"})),r.createElement("div",null,r.createElement("label",{className:"block"},"Email:"),r.createElement("input",{type:"email",value:d,onChange:function(e){return p(e.target.value)},required:!0,className:"w-full p-2 border border-gray-300 rounded"})),r.createElement("div",null,r.createElement("label",{className:"block"},"Password:"),r.createElement("input",{type:"password",value:h,onChange:function(e){return b(e.target.value)},required:!0,className:"w-full p-2 border border-gray-300 rounded"})),r.createElement("div",null,r.createElement("label",{className:"block"},"Role:"),r.createElement("select",{value:E,onChange:function(e){return w(e.target.value)},className:"w-full p-2 border border-gray-300 rounded"},r.createElement("option",{value:"user"},"User"),r.createElement("option",{value:"admin"},"Admin"))),r.createElement("button",{type:"submit",disabled:n,className:"w-full p-2 bg-green-500 text-white rounded hover:bg-green-600"},n?"Registering...":"Register"))};const y=function(e){var t=e.onReset,n=e.loading,a=e.error,l=(0,r.useState)(""),o=(0,i.A)(l,2),c=o[0],u=o[1];return r.createElement("form",{onSubmit:function(e){e.preventDefault(),t(c)},className:"space-y-4"},r.createElement("h2",{className:"text-xl font-semibold"},"Password Reset"),a&&r.createElement("p",{className:"text-red-500"},a),r.createElement("div",null,r.createElement("label",{className:"block"},"Email:"),r.createElement("input",{type:"email",value:c,onChange:function(e){return u(e.target.value)},required:!0,className:"w-full p-2 border border-gray-300 rounded"})),r.createElement("button",{type:"submit",disabled:n,className:"w-full p-2 bg-yellow-500 text-white rounded hover:bg-yellow-600"},n?"Sending...":"Send Password Reset Email"))};const E=function(e){var t=e.activities,n=void 0===t?[]:t,a=n.length>0?n:[{type:"Running",duration:45,distance:5.2,date:"2025-05-20T12:00:00Z"},{type:"Cycling",duration:90,distance:25,date:"2025-05-18T12:00:00Z"},{type:"Swimming",duration:30,distance:1,date:"2025-05-15T12:00:00Z"}];return r.createElement("div",{className:"activity-data-display container mx-auto p-4"},r.createElement("h2",{className:"text-xl font-semibold mb-4"},"Activity Data"),r.createElement("ul",{className:"space-y-4"},a.map(function(e,t){return r.createElement("li",{key:t,className:"p-4 border border-gray-300 rounded"},r.createElement("p",{className:"text-lg font-medium"},e.type),r.createElement("p",{className:"text-sm text-gray-600"},"Duration: ",e.duration," minutes"),r.createElement("p",{className:"text-sm text-gray-600"},"Distance: ",e.distance," km"),r.createElement("p",{className:"text-sm text-gray-600"},"Date: ",new Date(e.date).toLocaleDateString()))})))};var w=n(402),x=n(4467),A=n(1448),N=n(5458),k=n(258),S=n(2325),O=[{type:"Running",duration:45,distance:5.2,date:"2025-05-01T12:00:00Z"},{type:"Running",duration:50,distance:6.1,date:"2025-05-03T12:00:00Z"},{type:"Running",duration:42,distance:5,date:"2025-05-07T12:00:00Z"},{type:"Running",duration:55,distance:7.3,date:"2025-05-10T12:00:00Z"},{type:"Running",duration:48,distance:6.7,date:"2025-05-14T12:00:00Z"},{type:"Running",duration:60,distance:8.2,date:"2025-05-18T12:00:00Z"},{type:"Cycling",duration:90,distance:25,date:"2025-05-02T12:00:00Z"},{type:"Cycling",duration:75,distance:18.5,date:"2025-05-06T12:00:00Z"},{type:"Cycling",duration:120,distance:35.2,date:"2025-05-09T12:00:00Z"},{type:"Cycling",duration:60,distance:15,date:"2025-05-13T12:00:00Z"},{type:"Cycling",duration:105,distance:28.5,date:"2025-05-17T12:00:00Z"},{type:"Swimming",duration:30,distance:1,date:"2025-05-04T12:00:00Z"},{type:"Swimming",duration:35,distance:1.2,date:"2025-05-11T12:00:00Z"},{type:"Swimming",duration:40,distance:1.5,date:"2025-05-19T12:00:00Z"}],D=(0,k.zD)("activities/fetchAll",function(){var e=(0,l.A)(c().mark(function e(t,n){var r,a,l,i,o,s;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.getState,a=n.rejectWithValue,e.prev=1,e.next=3;break;case 2:return e.abrupt("return",O);case 3:return l=r().auth.token,e.next=4,u.A.get("/api/activities",{headers:{Authorization:"Bearer ".concat(l)}});case 4:return i=e.sent,e.abrupt("return",i.data);case 5:return e.prev=5,s=e.catch(1),e.abrupt("return",a((null===(o=s.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)||"Failed to fetch activities"));case 6:case"end":return e.stop()}},e,null,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}()),j=(0,k.zD)("activities/add",function(){var e=(0,l.A)(c().mark(function e(t,n){var r,a,l,i,o,s;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,a=n.rejectWithValue,e.prev=1,l=r().auth.token,e.next=2,u.A.post("/api/activities",t,{headers:{Authorization:"Bearer ".concat(l)}});case 2:return i=e.sent,e.abrupt("return",i.data);case 3:return e.prev=3,s=e.catch(1),e.abrupt("return",a((null===(o=s.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)||"Failed to add activity"));case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(t,n){return e.apply(this,arguments)}}()),C=(0,k.zD)("activity/fetchLogs",function(){var e=(0,l.A)(c().mark(function e(t,n){var r,a,l;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,a=r().auth.token,e.next=1,u.A.get("/api/activitylog",{headers:{Authorization:"Bearer ".concat(a)}});case 1:return l=e.sent,e.abrupt("return",l.data);case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),P=(0,k.zD)("activity/fetchMetrics",function(){var e=(0,l.A)(c().mark(function e(t,n){var r,a,l;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,a=r().auth.token,e.next=1,u.A.get("/api/healthmetrics",{headers:{Authorization:"Bearer ".concat(a)}});case 1:return l=e.sent,e.abrupt("return",l.data);case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),R=(0,k.Z0)({name:"activities",initialState:{activities:[],filteredActivities:[],activeFilters:{type:null,dateRange:null},loading:!1,error:null,stats:null,activityLogs:[],healthMetrics:[],status:"idle"},reducers:{filterActivities:function(e,t){var n=t.payload,r=n.type,a=n.dateRange;e.activeFilters={type:r,dateRange:a};var l=(0,N.A)(e.activities);if(r&&(l=l.filter(function(e){return e.type===r})),a){var o=(0,i.A)(a,2),c=o[0],u=o[1];l=l.filter(function(e){var t=new Date(e.date);return t>=new Date(c)&&t<=new Date(u)})}e.filteredActivities=l},clearFilters:function(e){e.activeFilters={type:null,dateRange:null},e.filteredActivities=e.activities},calculateStats:function(e){if(0!==e.activities.length){var t=e.activities.length,n=e.activities.reduce(function(e,t){return e+t.distance},0),r=e.activities.reduce(function(e,t){return e+t.duration},0),a=(0,N.A)(new Set(e.activities.map(function(e){return e.type})));e.stats={totalActivities:t,totalDistance:n.toFixed(1),totalDuration:r,activityTypes:a,activityCounts:a.map(function(t){return{type:t,count:e.activities.filter(function(e){return e.type===t}).length}})}}}},extraReducers:function(e){e.addCase(D.pending,function(e){e.loading=!0,e.error=null}).addCase(D.fulfilled,function(e,t){e.loading=!1,e.activities=t.payload,e.filteredActivities=t.payload}).addCase(D.rejected,function(e,t){e.loading=!1,e.error=t.payload}).addCase(j.fulfilled,function(e,t){e.activities.push(t.payload),e.filteredActivities=e.activeFilters.type||e.activeFilters.dateRange?e.filteredActivities:(0,N.A)(e.activities)}).addCase(C.fulfilled,function(e,t){e.activityLogs=t.payload}).addCase(P.fulfilled,function(e,t){e.healthMetrics=t.payload})}}),T=function(e){return e.activities.activities},q=((0,S.Mz)([T],function(e){return(0,N.A)(new Set(e.map(function(e){return e.type})))}),(0,S.Mz)([T],function(e){return(0,N.A)(e).sort(function(e,t){return new Date(t.date)-new Date(e.date)}).slice(0,5)}),R.actions);q.filterActivities,q.clearFilters,q.calculateStats;R.reducer;function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){(0,x.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function B(e){var t=e.onSuccess,n=(0,A.wA)(),a=(0,A.d4)(function(e){return e.auth.token}),o=(0,r.useState)({activityType:"",duration:"",distance:"",date:""}),s=(0,i.A)(o,2),m=s[0],d=s[1],p=(0,r.useState)(""),f=(0,i.A)(p,2),v=f[0],h=f[1];function b(e){d(Z(Z({},m),{},(0,x.A)({},e.target.name,e.target.value)))}function g(){return(g=(0,l.A)(c().mark(function e(r){var l,i;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=2,u.A.post("/api/activitylog",m,{headers:{Authorization:"Bearer ".concat(a)}});case 2:n(C()),d({activityType:"",duration:"",distance:"",date:""}),h(""),t&&t(),e.next=4;break;case 3:e.prev=3,i=e.catch(1),h((null===(l=i.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.error)||"Error submitting activity log");case 4:case"end":return e.stop()}},e,null,[[1,3]])}))).apply(this,arguments)}return r.createElement("form",{onSubmit:function(e){return g.apply(this,arguments)}},r.createElement("h3",null,"Add Activity Log"),r.createElement("label",null,"Type:",r.createElement("select",{name:"activityType",value:m.activityType,onChange:b,required:!0},r.createElement("option",{value:""},"Select"),r.createElement("option",{value:"run"},"Run"),r.createElement("option",{value:"walk"},"Walk"),r.createElement("option",{value:"cycle"},"Cycle"),r.createElement("option",{value:"swim"},"Swim"),r.createElement("option",{value:"other"},"Other"))),r.createElement("label",null,"Duration (min):",r.createElement("input",{name:"duration",type:"number",value:m.duration,onChange:b,required:!0})),r.createElement("label",null,"Distance (km):",r.createElement("input",{name:"distance",type:"number",value:m.distance,onChange:b,required:!0})),r.createElement("label",null,"Date:",r.createElement("input",{name:"date",type:"date",value:m.date,onChange:b,required:!0})),r.createElement("button",{type:"submit"},"Add"),v&&r.createElement("div",{style:{color:"red"}},v))}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach(function(t){(0,x.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e){var t=e.onSuccess,n=(0,A.wA)(),a=(0,A.d4)(function(e){return e.auth.token}),o=(0,r.useState)({heartRate:"",sleepDuration:"",recovery:"",date:""}),s=(0,i.A)(o,2),m=s[0],d=s[1],p=(0,r.useState)(""),f=(0,i.A)(p,2),v=f[0],h=f[1];function b(e){d(L(L({},m),{},(0,x.A)({},e.target.name,e.target.value)))}function g(){return(g=(0,l.A)(c().mark(function e(r){var l,i;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=2,u.A.post("/api/healthmetrics",m,{headers:{Authorization:"Bearer ".concat(a)}});case 2:n(P()),d({heartRate:"",sleepDuration:"",recovery:"",date:""}),h(""),t&&t(),e.next=4;break;case 3:e.prev=3,i=e.catch(1),h((null===(l=i.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.error)||"Error submitting health metrics");case 4:case"end":return e.stop()}},e,null,[[1,3]])}))).apply(this,arguments)}return r.createElement("form",{onSubmit:function(e){return g.apply(this,arguments)}},r.createElement("h3",null,"Add Health Metrics"),r.createElement("label",null,"Heart Rate:",r.createElement("input",{name:"heartRate",type:"number",value:m.heartRate,onChange:b,required:!0})),r.createElement("label",null,"Sleep Duration (hrs):",r.createElement("input",{name:"sleepDuration",type:"number",value:m.sleepDuration,onChange:b,required:!0})),r.createElement("label",null,"Recovery (%):",r.createElement("input",{name:"recovery",type:"number",value:m.recovery,onChange:b,required:!0})),r.createElement("label",null,"Date:",r.createElement("input",{name:"date",type:"date",value:m.date,onChange:b,required:!0})),r.createElement("button",{type:"submit"},"Add"),v&&r.createElement("div",{style:{color:"red"}},v))}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){(0,x.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function I(e){var t=e.onSuccess,n=(0,A.wA)(),a=(0,A.d4)(function(e){return e.auth.token}),o=(0,r.useState)({name:"",brand:"",calories:"",protein:"",carbs:"",fat:"",servingSize:"",date:""}),s=(0,i.A)(o,2),m=s[0],d=s[1],p=(0,r.useState)(""),f=(0,i.A)(p,2),v=f[0],h=f[1];function b(e){d(H(H({},m),{},(0,x.A)({},e.target.name,e.target.value)))}function g(){return(g=(0,l.A)(c().mark(function e(r){var l,i;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=2,u.A.post("/api/food",m,{headers:{Authorization:"Bearer ".concat(a)}});case 2:d({name:"",brand:"",calories:"",protein:"",carbs:"",fat:"",servingSize:"",date:""}),h(""),t&&t(),n(C()),e.next=4;break;case 3:e.prev=3,i=e.catch(1),h((null===(l=i.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.error)||"Error submitting food");case 4:case"end":return e.stop()}},e,null,[[1,3]])}))).apply(this,arguments)}return r.createElement("form",{onSubmit:function(e){return g.apply(this,arguments)}},r.createElement("h3",null,"Add Food Entry"),r.createElement("label",null,"Name: ",r.createElement("input",{name:"name",value:m.name,onChange:b,required:!0})),r.createElement("label",null,"Brand: ",r.createElement("input",{name:"brand",value:m.brand,onChange:b})),r.createElement("label",null,"Calories: ",r.createElement("input",{name:"calories",type:"number",value:m.calories,onChange:b,required:!0})),r.createElement("label",null,"Protein: ",r.createElement("input",{name:"protein",type:"number",value:m.protein,onChange:b})),r.createElement("label",null,"Carbs: ",r.createElement("input",{name:"carbs",type:"number",value:m.carbs,onChange:b})),r.createElement("label",null,"Fat: ",r.createElement("input",{name:"fat",type:"number",value:m.fat,onChange:b})),r.createElement("label",null,"Serving Size: ",r.createElement("input",{name:"servingSize",value:m.servingSize,onChange:b})),r.createElement("label",null,"Date: ",r.createElement("input",{name:"date",type:"date",value:m.date,onChange:b,required:!0})),r.createElement("button",{type:"submit"},"Add"),v&&r.createElement("div",{style:{color:"red"}},v))}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(t){(0,x.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function G(e){var t=e.onSuccess,n=(0,A.d4)(function(e){return e.auth.token}),a=(0,r.useState)({type:"",target:"",unit:"",deadline:"",status:"active"}),o=(0,i.A)(a,2),s=o[0],m=o[1],d=(0,r.useState)(""),p=(0,i.A)(d,2),f=p[0],v=p[1];function h(e){m(U(U({},s),{},(0,x.A)({},e.target.name,e.target.value)))}function b(){return(b=(0,l.A)(c().mark(function e(r){var a,l;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=2,u.A.post("/api/goal",s,{headers:{Authorization:"Bearer ".concat(n)}});case 2:m({type:"",target:"",unit:"",deadline:"",status:"active"}),v(""),t&&t(),e.next=4;break;case 3:e.prev=3,l=e.catch(1),v((null===(a=l.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.error)||"Error submitting goal");case 4:case"end":return e.stop()}},e,null,[[1,3]])}))).apply(this,arguments)}return r.createElement("form",{onSubmit:function(e){return b.apply(this,arguments)}},r.createElement("h3",null,"Add Goal"),r.createElement("label",null,"Type: ",r.createElement("input",{name:"type",value:s.type,onChange:h,required:!0})),r.createElement("label",null,"Target: ",r.createElement("input",{name:"target",type:"number",value:s.target,onChange:h,required:!0})),r.createElement("label",null,"Unit: ",r.createElement("input",{name:"unit",value:s.unit,onChange:h})),r.createElement("label",null,"Deadline: ",r.createElement("input",{name:"deadline",type:"date",value:s.deadline,onChange:h})),r.createElement("button",{type:"submit"},"Add"),f&&r.createElement("div",{style:{color:"red"}},f))}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){(0,x.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function $(e){var t=e.onSuccess,n=(0,A.d4)(function(e){return e.auth.token}),a=(0,r.useState)({amount:"",date:""}),o=(0,i.A)(a,2),s=o[0],m=o[1],d=(0,r.useState)(""),p=(0,i.A)(d,2),f=p[0],v=p[1];function h(e){m(K(K({},s),{},(0,x.A)({},e.target.name,e.target.value)))}function b(){return(b=(0,l.A)(c().mark(function e(r){var a,l;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=2,u.A.post("/api/waterintake",s,{headers:{Authorization:"Bearer ".concat(n)}});case 2:m({amount:"",date:""}),v(""),t&&t(),e.next=4;break;case 3:e.prev=3,l=e.catch(1),v((null===(a=l.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.error)||"Error submitting water intake");case 4:case"end":return e.stop()}},e,null,[[1,3]])}))).apply(this,arguments)}return r.createElement("form",{onSubmit:function(e){return b.apply(this,arguments)}},r.createElement("h3",null,"Add Water Intake"),r.createElement("label",null,"Amount (ml): ",r.createElement("input",{name:"amount",type:"number",value:s.amount,onChange:h,required:!0})),r.createElement("label",null,"Date: ",r.createElement("input",{name:"date",type:"date",value:s.date,onChange:h,required:!0})),r.createElement("button",{type:"submit"},"Add"),f&&r.createElement("div",{style:{color:"red"}},f))}function J(){var e=(0,A.d4)(function(e){return e.auth.token}),t=(0,r.useState)({}),n=(0,i.A)(t,2),a=n[0],o=n[1],s=(0,r.useState)(""),m=(0,i.A)(s,2),d=m[0],p=m[1];return(0,r.useEffect)(function(){function t(){return(t=(0,l.A)(c().mark(function t(){var n,r,a;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,u.A.get("/api/admin/analytics",{headers:{Authorization:"Bearer ".concat(e)}});case 1:n=t.sent,o(n.data),t.next=3;break;case 2:t.prev=2,a=t.catch(0),p((null===(r=a.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.error)||"Error fetching analytics");case 3:case"end":return t.stop()}},t,null,[[0,2]])}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[e]),r.createElement("div",null,r.createElement("h2",null,"Admin Analytics"),d&&r.createElement("div",{style:{color:"red"}},d),r.createElement("ul",null,r.createElement("li",null,"Total Users: ",a.totalUsers),r.createElement("li",null,"Total Activities: ",a.totalActivities),r.createElement("li",null,"Average Activity Duration: ",a.avgDuration," min"),r.createElement("li",null,"Most Popular Activity: ",a.popularActivity),r.createElement("li",null,"Active Goals: ",a.activeGoals),r.createElement("li",null,"Water Intake (avg): ",a.avgWaterIntake," ml")))}var Q=(0,r.lazy)(function(){return Promise.all([n.e(499),n.e(114),n.e(77),n.e(949),n.e(330),n.e(286),n.e(722),n.e(618)]).then(n.bind(n,618))}),X=(0,r.lazy)(function(){return n.e(894).then(n.bind(n,3894))}),Y=(0,r.lazy)(function(){return n.e(985).then(n.bind(n,9985))}),ee=(0,r.lazy)(function(){return n.e(249).then(n.bind(n,9249))}),te=(0,r.lazy)(function(){return n.e(290).then(n.bind(n,4290))}),ne=function(){return r.createElement("div",{className:"flex justify-center items-center h-48"},r.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"}),r.createElement("p",{className:"ml-3 font-semibold text-gray-700"},"Loading..."))};function re(e){var t=e.onLogin,n=e.loading,a=e.error,l=(0,r.useState)(""),o=(0,i.A)(l,2),c=o[0],u=o[1],s=(0,r.useState)(""),m=(0,i.A)(s,2),d=m[0],p=m[1];return r.createElement("form",{onSubmit:function(e){e.preventDefault(),t(c,d)},className:"space-y-4"},r.createElement("h2",{className:"text-xl font-semibold"},"Login"),a&&r.createElement("p",{className:"text-red-500"},a),r.createElement("div",null,r.createElement("label",{className:"block"},"Username:"),r.createElement("input",{type:"text",value:c,onChange:function(e){return u(e.target.value)},required:!0,className:"w-full p-2 border border-gray-300 rounded","aria-label":"Username"})),r.createElement("div",null,r.createElement("label",{className:"block"},"Password:"),r.createElement("input",{type:"password",value:d,onChange:function(e){return p(e.target.value)},required:!0,className:"w-full p-2 border border-gray-300 rounded","aria-label":"Password"})),r.createElement("button",{type:"submit",disabled:n,className:"w-full p-2 bg-blue-500 text-white rounded hover:bg-blue-600"},n?"Logging in...":"Login"))}const ae=function(){var e=(0,A.wA)(),t=(0,A.d4)(function(e){return e.activity}),n=t.activityLogs,a=t.healthMetrics,o=(0,r.useState)(!1),d=(0,i.A)(o,2),p=d[0],x=d[1],N=(0,r.useState)(null),k=(0,i.A)(N,2),S=k[0],O=k[1],D=(0,r.useState)(!1),j=(0,i.A)(D,2),R=j[0],T=j[1],q=(0,r.useState)(null),z=(0,i.A)(q,2),Z=z[0],F=z[1],L=function(){var e=(0,l.A)(c().mark(function e(t,n){var r,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.prev=1,e.next=2,u.A.post("/login",{username:t,password:n});case 2:r=e.sent,a=r.data.token,localStorage.setItem("token",a),x(!0),W(),e.next=4;break;case 3:e.prev=3,e.catch(1),F("Login failed. Please check your credentials.");case 4:return e.prev=4,T(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])}));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=(0,l.A)(c().mark(function e(t){var n,r,a,l,i,o;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.email,a=t.password,l=t.role,T(!0),e.prev=1,e.next=2,u.A.post("/signup",{username:n,email:r,password:a,role:l});case 2:i=e.sent,o=i.data.token,localStorage.setItem("token",o),x(!0),W(),e.next=4;break;case 3:e.prev=3,e.catch(1),F("Registration failed. Please try again.");case 4:return e.prev=4,T(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=(0,l.A)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.prev=1,e.next=2,u.A.post("/password-recovery",{email:t});case 2:F("Password reset email sent."),e.next=4;break;case 3:e.prev=3,e.catch(1),F("Failed to send password reset email.");case 4:return e.prev=4,T(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=(0,l.A)(c().mark(function e(){var t,n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.prev=1,t=localStorage.getItem("token"),e.next=2,u.A.get("/profile",{headers:{Authorization:"Bearer ".concat(t)}});case 2:n=e.sent,O(n.data),e.next=4;break;case 3:e.prev=3,e.catch(1),F("Failed to fetch user profile.");case 4:return e.prev=4,T(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)(function(){localStorage.getItem("token")&&(x(!0),W())},[]),(0,r.useEffect)(function(){e(C()),e(P())},[e]),r.createElement(s.Kd,null,r.createElement("div",{className:"App min-h-screen bg-gray-50"},r.createElement(f,{userRole:null==S?void 0:S.role}),p&&r.createElement(h,null),r.createElement("div",{className:"container mx-auto px-4 py-6"},r.createElement("div",{className:"flex justify-between items-center mb-6"},r.createElement("h1",{className:"text-2xl font-bold"},"Tracksy"),p&&r.createElement("div",{className:"flex items-center"},r.createElement(v,null),r.createElement("div",{className:"ml-4 text-sm font-medium text-gray-600"},"Welcome, ",(null==S?void 0:S.username)||"User"," (",(null==S?void 0:S.role)||"user",")"))),p&&r.createElement("div",{className:"mb-6"},r.createElement("nav",{className:"flex space-x-4"},r.createElement(s.N_,{to:"/dashboard",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-200 ".concat("/dashboard"===window.location.pathname?"bg-blue-500 text-white":"")},"Dashboard"),"admin"===(null==S?void 0:S.role)&&r.createElement(s.N_,{to:"/admin/dashboard",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-200 ".concat("/admin/dashboard"===window.location.pathname?"bg-red-500 text-white":"")},"Admin"),r.createElement(s.N_,{to:"/integrations",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-200\n                    ".concat("/integrations"===window.location.pathname?"bg-blue-500 text-white":"")},"Integrations"),r.createElement(s.N_,{to:"/profile",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-200\n                    ".concat("/profile"===window.location.pathname?"bg-blue-500 text-white":"")},"Profile"),r.createElement(s.N_,{to:"/notifications",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-200\n                    ".concat("/notifications"===window.location.pathname?"bg-blue-500 text-white":"")},"Notifications"),r.createElement(s.N_,{to:"/settings",className:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-200\n                    ".concat("/settings"===window.location.pathname?"bg-blue-500 text-white":"")},"Settings"))),r.createElement("div",{className:"main-content bg-white rounded-lg shadow-sm p-6"},r.createElement(b.A,null,r.createElement(r.Suspense,{fallback:r.createElement(ne,null)},r.createElement(m.BV,null,r.createElement(m.qh,{path:"/dashboard",element:r.createElement(Q,{user:S})}),r.createElement(m.qh,{path:"/integrations",element:r.createElement(X,null)}),r.createElement(m.qh,{path:"/profile",element:r.createElement(Y,{user:S||{}})}),r.createElement(m.qh,{path:"/notifications",element:r.createElement(ee,{notifications:[]})}),r.createElement(m.qh,{path:"/settings",element:r.createElement(te,null)}),r.createElement(m.qh,{path:"/register",element:r.createElement(g,{onRegister:M,loading:R,error:Z})}),r.createElement(m.qh,{path:"/password-reset",element:r.createElement(y,{onReset:H,loading:R,error:Z})}),r.createElement(m.qh,{path:"/admin/dashboard",element:"admin"===(null==S?void 0:S.role)?r.createElement("div",null,"Admin Dashboard"):r.createElement(m.C5,{to:"/dashboard",replace:!0})}),r.createElement(m.qh,{path:"/",element:r.createElement(m.C5,{to:"/dashboard",replace:!0})}),r.createElement(m.qh,{path:"*",element:r.createElement(m.C5,{to:"/dashboard",replace:!0})})))),!p&&r.createElement(r.Fragment,null,r.createElement(re,{onLogin:L,loading:R,error:Z}),r.createElement("div",{className:"mt-4 flex space-x-4"},r.createElement(s.N_,{to:"/register",className:"text-blue-500 hover:underline"},"Register"),r.createElement(s.N_,{to:"/password-reset",className:"text-yellow-500 hover:underline"},"Forgot Password?"))))),p&&r.createElement("div",{className:"activity-health-metrics bg-white rounded-lg shadow-sm p-6 mt-6"},r.createElement("h2",{className:"text-xl font-semibold mb-4"},"Activity Logs & Health Metrics"),r.createElement(B,null),r.createElement(E,{data:n}),r.createElement(_,null),r.createElement(w.default,{data:a}),r.createElement(I,null),r.createElement(G,null),r.createElement($,null),r.createElement(J,null))))};n(8442);var le=document.getElementById("root");"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js").then(function(e){}).catch(function(e){})}),window.addEventListener("error",function(e){}),le&&(a.createRoot?a.createRoot(le).render(r.createElement(r.StrictMode,null,r.createElement(ae,null))):a.render(r.createElement(r.StrictMode,null,r.createElement(ae,null)),le))},8442:(e,t,n)=>{n.d(t,{SH:()=>a,jn:()=>r,nF:()=>l});n(6540);var r=function(e){return window.performance&&window.performance.mark&&window.performance.mark("".concat(e,"-start")),performance.now()},a=function(e,t){var n=performance.now()-t;return window.performance&&window.performance.mark&&(window.performance.mark("".concat(e,"-end")),window.performance.measure(e,"".concat(e,"-start"),"".concat(e,"-end"))),n},l=function(e,t){var n;return function(){n||(e.apply(void 0,arguments),n=!0,setTimeout(function(){return n=!1},t))}}}},e=>{e.O(0,[80,811,238,267,499,114,77,949,330,286,722],()=>{return t=3759,e(e.s=t);var t});e.O()}]);