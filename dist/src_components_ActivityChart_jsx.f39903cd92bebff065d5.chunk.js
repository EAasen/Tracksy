"use strict";(self.webpackChunktracksy_frontend=self.webpackChunktracksy_frontend||[]).push([["src_components_ActivityChart_jsx"],{"./src/components/ActivityChart.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_chartjs_2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-chartjs-2 */ "./node_modules/react-chartjs-2/dist/index.js");\n/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! chart.js */ "./node_modules/chart.js/dist/chart.mjs");\n/* harmony import */ var _utils_performance__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/performance */ "./src/utils/performance.js");\n/* harmony import */ var tailwindcss_tailwind_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tailwindcss/tailwind.css */ "./node_modules/tailwindcss/tailwind.css");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ "./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js");\n__webpack_require__.$Refresh$.runtime = __webpack_require__(/*! ./node_modules/react-refresh/runtime.js */ "./node_modules/react-refresh/runtime.js");\n\n\n\n\n\n\n\n\n\n// Register Chart.js components\nchart_js__WEBPACK_IMPORTED_MODULE_4__.Chart.register(chart_js__WEBPACK_IMPORTED_MODULE_4__.CategoryScale, chart_js__WEBPACK_IMPORTED_MODULE_4__.LinearScale, chart_js__WEBPACK_IMPORTED_MODULE_4__.PointElement, chart_js__WEBPACK_IMPORTED_MODULE_4__.LineElement, chart_js__WEBPACK_IMPORTED_MODULE_4__.Title, chart_js__WEBPACK_IMPORTED_MODULE_4__.Tooltip, chart_js__WEBPACK_IMPORTED_MODULE_4__.Legend);\n\n// Default chart options - defined outside component to prevent recreation\nvar defaultOptions = {\n  responsive: true,\n  maintainAspectRatio: false,\n  animation: {\n    duration: 800 // Reduced animation duration for better performance\n  },\n  plugins: {\n    legend: {\n      position: \'top\'\n    },\n    title: {\n      display: true,\n      text: \'Activity Distance Over Time\',\n      font: {\n        size: 16\n      }\n    },\n    tooltip: {\n      callbacks: {\n        label: function label(context) {\n          return "".concat(context.dataset.label, ": ").concat(context.raw, " km");\n        }\n      }\n    }\n  },\n  scales: {\n    y: {\n      title: {\n        display: true,\n        text: \'Distance (km)\'\n      },\n      beginAtZero: true\n    },\n    x: {\n      title: {\n        display: true,\n        text: \'Date\'\n      }\n    }\n  }\n};\n\n// Utility function to generate colors - defined outside to prevent recreation\nvar generateChartColor = function generateChartColor(index) {\n  var hue = index * 137 % 360; // Golden angle approximation for good distribution\n  return "hsla(".concat(hue, ", 70%, 60%, 0.8)");\n};\nvar ActivityChart = function ActivityChart(_ref) {\n  var activities = _ref.activities;\n  var renderStartTime = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)((0,_utils_performance__WEBPACK_IMPORTED_MODULE_5__.startMeasure)(\'activity-chart-render\'));\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({\n      labels: [],\n      datasets: []\n    }),\n    _useState2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__["default"])(_useState, 2),\n    chartData = _useState2[0],\n    setChartData = _useState2[1];\n\n  // Process activities data for visualization - memoized to prevent recalculation\n  var processedData = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(function () {\n    if (!activities || activities.length === 0) return {\n      labels: [],\n      datasets: []\n    };\n    var processStartTime = (0,_utils_performance__WEBPACK_IMPORTED_MODULE_5__.startMeasure)(\'process-chart-data\');\n\n    // Group activities by type\n    var activityTypes = (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["default"])(new Set(activities.map(function (activity) {\n      return activity.type;\n    })));\n\n    // Sort activities by date\n    var sortedActivities = (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["default"])(activities).sort(function (a, b) {\n      return new Date(a.date) - new Date(b.date);\n    });\n\n    // Extract dates for labels\n    var labels = sortedActivities.map(function (activity) {\n      return new Date(activity.date).toLocaleDateString();\n    });\n\n    // Create datasets for each activity type\n    var datasets = activityTypes.map(function (type, index) {\n      var typeActivities = sortedActivities.filter(function (activity) {\n        return activity.type === type;\n      });\n\n      // Create a map for faster lookups instead of using find() in a loop\n      var activityByDate = {};\n      typeActivities.forEach(function (activity) {\n        var dateKey = new Date(activity.date).toLocaleDateString();\n        activityByDate[dateKey] = activity;\n      });\n      var data = labels.map(function (date) {\n        var activity = activityByDate[date];\n        return activity ? activity.distance : null;\n      });\n      return {\n        label: type,\n        data: data,\n        fill: false,\n        backgroundColor: generateChartColor(index),\n        borderColor: generateChartColor(index),\n        tension: 0.1\n      };\n    });\n    var result = {\n      labels: (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["default"])(new Set(labels)),\n      // Unique dates\n      datasets: datasets\n    };\n    (0,_utils_performance__WEBPACK_IMPORTED_MODULE_5__.endMeasure)(\'process-chart-data\', processStartTime);\n    return result;\n  }, [activities]);\n\n  // Update chart data when processed data changes\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function () {\n    setChartData(processedData);\n\n    // Log render time after initial data is processed\n    (0,_utils_performance__WEBPACK_IMPORTED_MODULE_5__.endMeasure)(\'activity-chart-render\', renderStartTime.current);\n  }, [processedData]);\n  if (!activities || activities.length === 0) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div", {\n      className: "activity-chart container mx-auto p-4 border border-gray-300 rounded bg-gray-50"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement("p", {\n      className: "text-center text-gray-500 py-8"\n    }, "No activity data available to display"));\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div", {\n    className: "activity-chart w-full"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div", {\n    className: "bg-white"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(react_chartjs_2__WEBPACK_IMPORTED_MODULE_3__.Line, {\n    data: chartData,\n    options: defaultOptions\n    // Use a dedicated height for better resize performance\n    ,\n    height: 400\n  })));\n};\n\n// Use React.memo to prevent unnecessary re-renders\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().memo(ActivityChart));\n\nconst $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nconst $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (false) // removed by dead control flow\n{}\n}\n\nif (typeof Promise !== \'undefined\' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}\n\n//# sourceURL=webpack://tracksy-frontend/./src/components/ActivityChart.jsx?\n}')}}]);