"use strict";(self.webpackChunktracksy_frontend=self.webpackChunktracksy_frontend||[]).push([[618],{618:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var n=a(5458),r=a(467),l=a(296),c=a(4756),i=a.n(c),s=a(6540),o=(a(2021),a(8442)),u=a(5556),m=a.n(u),d=function(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"}))},p=function(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"}))},v=function(e){var t=e.title,a=e.children,n=e.fullWidth,r=void 0!==n&&n,l=e.className,c=void 0===l?"":l;return s.createElement("div",{className:"data-card ".concat(r?"w-full":"w-full md:w-auto"," ").concat(c)},s.createElement("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 h-full"},t&&s.createElement("div",{className:"mb-4 pb-2 border-b"},s.createElement("h3",{className:"text-lg font-semibold text-gray-800"},t)),s.createElement("div",{className:"data-card-content"},a)))};v.propTypes={title:m().string,children:m().node,fullWidth:m().bool,className:m().string};var y=function(e){var t=e.label,a=e.value,n=e.unit,r=void 0===n?"":n,l=e.trend,c=void 0===l?null:l,i=e.trendValue,o=void 0===i?null:i,u=e.icon,m=void 0===u?null:u,v="",y=null;return"up"===c?(v="text-green-500",y=s.createElement(d,null)):"down"===c&&(v="text-red-500",y=s.createElement(p,null)),s.createElement("div",{className:"metric-stat p-4"},s.createElement("div",{className:"flex items-center mb-2"},m&&s.createElement("span",{className:"mr-2"},m),s.createElement("h4",{className:"text-sm font-medium text-gray-500"},t)),s.createElement("div",{className:"flex items-baseline"},s.createElement("p",{className:"text-2xl font-semibold text-gray-800"},a),r&&s.createElement("span",{className:"ml-1 text-gray-600"},r),c&&o&&s.createElement("span",{className:"ml-2 ".concat(v," text-sm font-medium flex items-center")},y," ",o)))};y.propTypes={label:m().string.isRequired,value:m().oneOfType([m().number,m().string]).isRequired,unit:m().string,trend:m().oneOf(["up","down",null]),trendValue:m().string,icon:m().node};var h=(0,s.memo)(v),f=(0,s.memo)(y),E=a(2321),b=(0,s.lazy)(function(){return a.e(232).then(a.bind(a,7232))}),g=(0,s.lazy)(function(){return Promise.resolve().then(a.bind(a,402))}),x=function(){return s.createElement("div",{className:"flex justify-center items-center h-full"},s.createElement("div",{className:"animate-pulse flex space-x-4 w-full"},s.createElement("div",{className:"flex-1 space-y-4 py-1"},s.createElement("div",{className:"h-64 bg-gray-200 rounded w-full"}))))},N=function(e){var t=e.data,a=e.columns,n=e.rowHeight,r=void 0===n?40:n,c=e.visibleRows,i=void 0===c?10:c,u=(0,s.useState)(0),m=(0,l.A)(u,2),d=m[0],p=m[1],v=t.length*r,y=i*r,h=(0,o.nF)(function(e){var t=e.target.scrollTop,a=Math.floor(t/r);p(a)},50),f=t.slice(d,d+i+3);return s.createElement("div",{className:"overflow-y-auto",style:{height:"".concat(y,"px")},onScroll:h},s.createElement("div",{style:{height:"".concat(v,"px"),position:"relative"}},s.createElement("table",{className:"min-w-full"},s.createElement("thead",null,s.createElement("tr",null,a.map(function(e){return s.createElement("th",{key:e.key,className:"py-2 px-4 text-left sticky top-0 bg-white z-10"},e.label)}))),s.createElement("tbody",{style:{position:"absolute",top:"".concat(d*r,"px"),width:"100%"}},f.map(function(e,t){return s.createElement("tr",{key:d+t,className:(d+t)%2==0?"bg-gray-50":"",style:{height:"".concat(r,"px")}},a.map(function(t){return s.createElement("td",{key:t.key,className:"py-2 px-4"},t.render?t.render(e):e[t.key])}))})))))},w=function(e){e.user;var t=s.useRef((0,o.jn)("dashboard-render")),a=(0,s.useState)("summary"),c=(0,l.A)(a,2),u=c[0],m=c[1],d=(0,s.useState)([]),p=(0,l.A)(d,2),v=p[0],y=p[1],w=(0,s.useState)([]),k=(0,l.A)(w,2),T=k[0],D=k[1],R=(0,s.useState)(!0),Z=(0,l.A)(R,2),S=Z[0],A=Z[1],H=(0,s.useState)(null),C=(0,l.A)(H,2),M=C[0],F=C[1];(0,s.useEffect)(function(){var e=function(){var e=(0,r.A)(i().mark(function e(){var t,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,o.jn)("dashboard-data-fetch");try{A(!0),a=[{heartRate:68,sleepDuration:7.2,recovery:85,date:"2025-05-01T08:00:00Z"},{heartRate:70,sleepDuration:6.8,recovery:80,date:"2025-05-02T08:00:00Z"},{heartRate:65,sleepDuration:7.5,recovery:88,date:"2025-05-03T08:00:00Z"},{heartRate:72,sleepDuration:6.5,recovery:75,date:"2025-05-04T08:00:00Z"},{heartRate:67,sleepDuration:7.8,recovery:90,date:"2025-05-05T08:00:00Z"},{heartRate:69,sleepDuration:7,recovery:82,date:"2025-05-06T08:00:00Z"},{heartRate:66,sleepDuration:7.3,recovery:87,date:"2025-05-07T08:00:00Z"},{heartRate:71,sleepDuration:6.7,recovery:78,date:"2025-05-08T08:00:00Z"},{heartRate:68,sleepDuration:7.1,recovery:84,date:"2025-05-09T08:00:00Z"},{heartRate:64,sleepDuration:8,recovery:92,date:"2025-05-10T08:00:00Z"},{heartRate:67,sleepDuration:7.4,recovery:86,date:"2025-05-11T08:00:00Z"},{heartRate:70,sleepDuration:7.2,recovery:83,date:"2025-05-12T08:00:00Z"},{heartRate:66,sleepDuration:7.6,recovery:89,date:"2025-05-13T08:00:00Z"},{heartRate:69,sleepDuration:7,recovery:81,date:"2025-05-14T08:00:00Z"}],y([{type:"Running",duration:45,distance:5.2,date:"2025-05-01T12:00:00Z"},{type:"Running",duration:50,distance:6.1,date:"2025-05-03T12:00:00Z"},{type:"Running",duration:42,distance:5,date:"2025-05-07T12:00:00Z"},{type:"Running",duration:55,distance:7.3,date:"2025-05-10T12:00:00Z"},{type:"Running",duration:48,distance:6.7,date:"2025-05-14T12:00:00Z"},{type:"Running",duration:60,distance:8.2,date:"2025-05-18T12:00:00Z"},{type:"Cycling",duration:90,distance:25,date:"2025-05-02T12:00:00Z"},{type:"Cycling",duration:75,distance:18.5,date:"2025-05-06T12:00:00Z"},{type:"Cycling",duration:120,distance:35.2,date:"2025-05-09T12:00:00Z"},{type:"Cycling",duration:60,distance:15,date:"2025-05-13T12:00:00Z"},{type:"Cycling",duration:105,distance:28.5,date:"2025-05-17T12:00:00Z"},{type:"Swimming",duration:30,distance:1,date:"2025-05-04T12:00:00Z"},{type:"Swimming",duration:35,distance:1.2,date:"2025-05-11T12:00:00Z"},{type:"Swimming",duration:40,distance:1.5,date:"2025-05-19T12:00:00Z"}]),D(a),A(!1),(0,o.SH)("dashboard-data-fetch",t)}catch(e){F("Failed to load user data"),A(!1)}case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return e(),function(){(0,o.SH)("dashboard-active-time",t.current)}},[]);var W=(0,s.useMemo)(function(){if(!v.length||!T.length)return null;var e=(0,o.jn)("summary-stats-calc"),t={totalActivities:v.length,totalDistance:v.reduce(function(e,t){return e+t.distance},0).toFixed(1),totalDuration:v.reduce(function(e,t){return e+t.duration},0),activityTypes:(0,n.A)(new Set(v.map(function(e){return e.type}))),avgHeartRate:(T.reduce(function(e,t){return e+t.heartRate},0)/T.length).toFixed(1),avgSleep:(T.reduce(function(e,t){return e+t.sleepDuration},0)/T.length).toFixed(1),avgRecovery:(T.reduce(function(e,t){return e+t.recovery},0)/T.length).toFixed(1)};return(0,o.SH)("summary-stats-calc",e),t},[v,T]),V=(0,s.useMemo)(function(){return[{key:"type",label:"Type"},{key:"date",label:"Date",render:function(e){return new Date(e.date).toLocaleDateString()}},{key:"distance",label:"Distance",render:function(e){return"".concat(e.distance," km")}},{key:"duration",label:"Duration",render:function(e){return"".concat(e.duration," min")}}]},[]),j=(0,s.useMemo)(function(){return[{key:"date",label:"Date",render:function(e){return new Date(e.date).toLocaleDateString()}},{key:"heartRate",label:"Heart Rate",render:function(e){return"".concat(e.heartRate," bpm")}},{key:"sleepDuration",label:"Sleep Duration",render:function(e){return"".concat(e.sleepDuration," hours")}},{key:"recovery",label:"Recovery",render:function(e){return"".concat(e.recovery,"%")}}]},[]),L=(0,s.useMemo)(function(){return(0,n.A)(v).sort(function(e,t){return new Date(t.date)-new Date(e.date)})},[v]),z=(0,s.useMemo)(function(){return(0,n.A)(T).sort(function(e,t){return new Date(t.date)-new Date(e.date)})},[T]),q=(0,s.useMemo)(function(){return L.slice(0,5)},[L]),B=(0,s.useMemo)(function(){return T.slice(-7)},[T]);return(0,s.useEffect)(function(){S||(0,o.SH)("dashboard-render",t.current)},[S]),S?s.createElement("div",{className:"dashboard container mx-auto p-4"},s.createElement("div",{className:"flex justify-center items-center h-64"},s.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"}))):M?s.createElement("div",{className:"dashboard container mx-auto p-4"},s.createElement("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",role:"alert"},s.createElement("p",null,M))):s.createElement("div",{className:"dashboard container mx-auto p-4"},s.createElement("h1",{className:"text-2xl font-bold mb-6"},"Your Health & Fitness Dashboard"),s.createElement("div",{className:"mb-6 border-b border-gray-200"},s.createElement("ul",{className:"flex flex-wrap -mb-px"},s.createElement("li",{className:"mr-2"},s.createElement("button",{className:"inline-block py-2 px-4 ".concat("summary"===u?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),onClick:function(){return m("summary")}},"Summary")),s.createElement("li",{className:"mr-2"},s.createElement("button",{className:"inline-block py-2 px-4 ".concat("activities"===u?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),onClick:function(){return m("activities")}},"Activities")),s.createElement("li",{className:"mr-2"},s.createElement("button",{className:"inline-block py-2 px-4 ".concat("health"===u?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),onClick:function(){return m("health")}},"Health")))),s.createElement(E.A,null,s.createElement("div",{className:"dashboard-content"},"summary"===u&&s.createElement(s.Fragment,null,s.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},s.createElement(h,null,s.createElement(f,{label:"Activities",value:(null==W?void 0:W.totalActivities)||0,trend:"up",trendValue:"+3 this week"})),s.createElement(h,null,s.createElement(f,{label:"Total Distance",value:(null==W?void 0:W.totalDistance)||0,unit:"km",trend:"up",trendValue:"+12.5 km"})),s.createElement(h,null,s.createElement(f,{label:"Average Sleep",value:(null==W?void 0:W.avgSleep)||0,unit:"hrs",trend:"down",trendValue:"-0.3 hrs"})),s.createElement(h,null,s.createElement(f,{label:"Average Heart Rate",value:(null==W?void 0:W.avgHeartRate)||0,unit:"bpm"}))),s.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},s.createElement(h,{title:"Activity Trends"},s.createElement("div",{style:{height:"300px"}},s.createElement(s.Suspense,{fallback:s.createElement(x,null)},s.createElement(b,{activities:v.slice(-7)}))),s.createElement("div",{className:"mt-2 text-right"},s.createElement("button",{className:"text-blue-500 text-sm",onClick:function(){return m("activities")}},"View all activities →"))),s.createElement(h,{title:"Health Trends"},s.createElement("div",{style:{height:"300px"}},s.createElement(s.Suspense,{fallback:s.createElement(x,null)},s.createElement(g,{metrics:B}))),s.createElement("div",{className:"mt-2 text-right"},s.createElement("button",{className:"text-blue-500 text-sm",onClick:function(){return m("health")}},"View all health metrics →")))),s.createElement(h,{title:"Recent Activities",fullWidth:!0},s.createElement("div",{className:"overflow-x-auto"},s.createElement("table",{className:"min-w-full"},s.createElement("thead",null,s.createElement("tr",null,V.map(function(e){return s.createElement("th",{key:e.key,className:"py-2 px-4 text-left"},e.label)}))),s.createElement("tbody",null,q.map(function(e,t){return s.createElement("tr",{key:t,className:t%2==0?"bg-gray-50":""},V.map(function(t){return s.createElement("td",{key:t.key,className:"py-2 px-4"},t.render?t.render(e):e[t.key])}))})))))),"activities"===u&&s.createElement(s.Fragment,null,s.createElement(h,{title:"Activity Distance Trends",fullWidth:!0},s.createElement("div",{style:{height:"400px"}},s.createElement(s.Suspense,{fallback:s.createElement(x,null)},s.createElement(b,{activities:v})))),s.createElement("div",{className:"mt-8"},s.createElement(h,{title:"All Activities",fullWidth:!0},s.createElement(N,{data:L,columns:V,rowHeight:48,visibleRows:10})))),"health"===u&&s.createElement(s.Fragment,null,s.createElement(h,{title:"Health Metrics Trends",fullWidth:!0},s.createElement("div",{style:{height:"400px"}},s.createElement(s.Suspense,{fallback:s.createElement(x,null)},s.createElement(g,{metrics:T})))),s.createElement("div",{className:"mt-8"},s.createElement(h,{title:"All Health Metrics",fullWidth:!0},s.createElement(N,{data:z,columns:j,rowHeight:48,visibleRows:10})))))))};const k=s.memo(w)}}]);